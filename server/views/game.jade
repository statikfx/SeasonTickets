div.individual
  table
    tr  
      td.bold
        | Opponent:
      td
        = game.opponent;
    tr
      td.bold
        | Day Of Week:
      td
        = helpers.getDayOfWeekOfDate(new Date(game.date + " " + game.time));
    tr
      td.bold
        | Time:
      td
        = game.time;
        
    tr
      td.bold
        | Status:
      td.status
        = game.status
    tr
      td.bold
        | Seats:
      - if (game && game.seats && game.seats.length < 1)
        td
          | No Seats Available
      - if (game && game.seats && game.seats.length > 0)
        td
          - each seat in game.seats
            | S.#{seat.section}R.#{seat.row}S.#{seat.seat} - $#{seat.price}
    - if (admin)
      tr
        td
          a.viewapprove(href="#{helpers.appendBaseURL('admin/', 'game/' + game._id + '/approve/')}") approve
        td
          a.viewreject(href="#{helpers.appendBaseURL('admin/', 'game/' + game._id + '/reject/')}") reject
        td
          a.clearrequests(href="#{helpers.appendBaseURL('requests/', 'clear/' + game._id + '/')}") clear requests
  br
  
  - if (game.closed === "Y")
    | This game has already been sold.
  - if (game.closed !== "Y")
    != partial('partials/requests', { requests: game.requests })
    hr
    h1
      | Request Seats:
    div
      form#requestform(method='POST', action='/requests/add/#{game._id}/')
        table
          tr
            td(colspan='2')
              input(type='text', name='name', placeholder='Your Name')
          tr
            td(colspan='2')
              input(type='text', name='email', placeholder='Your Email')
          tr
            td 
              input(type='submit', class="submit", value='Request Game')
            td
              input(type='reset', class="reset", value='Reset', id='reset')
          input(type='hidden', name='price', value='#{game.price}')
          input(type='hidden', name='gameid', value='#{game._id}', id='gameid')
    br
    hr
  br
  br
  - if (related.games.length > 0)
    span
      | Related Games versus #{game.opponent}
    table
      - each rel in related.games
        - if (rel._id != game._id)
          tr
            td
              - var gameURL = helpers.getDateForURL(rel.date);
              - var dayOfWeek = helpers.getDayOfWeekOfDate(new Date(rel.date + " " + rel.time));
              - var adminPath = ( admin ? 'admin/' : '');
              a.view(href="#{helpers.appendBaseURL(adminPath, 'game/'+ gameURL + '/')}") #{dayOfWeek} #{rel.date}
  - else
    span
      | No related games.
